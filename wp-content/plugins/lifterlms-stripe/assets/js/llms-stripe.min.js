!function(e){var t=window.llms_stripe||{},l=Stripe(t.publishable_key),r=l.elements(t.settings.elements).create("card",t.settings.card);t.bind=function(){var t=this;window.llms.checkout.add_before_submit_event({data:t,handler:t.submit}),e("#llms-stripe-card-element").length&&t.mount_card(),e("#llms_stripe_saved_card_id").on("change",function(){var l=e(this).val(),s=e("#llms_stripe_card_id");"create-new"===l?(s.val(""),r.mount("#llms-stripe-card-element"),t.toggle_submit(!1)):(s.val(l),r.unmount(),t.toggle_submit(!0))}),e("#llms_billing_zip").on("blur",function(){r.update({value:{postalCode:e("#llms_billing_zip").val()}})}).trigger("blur"),e("#llms_stripe_saved_card_id").trigger("change"),e(".llms-payment-gateways").on("llms-gateway-selected",function(l,s){"stripe"===s.id&&(r._complete?t.toggle_submit(!0):t.toggle_submit(!1),e("#llms_stripe_saved_card_id").trigger("change"),"create-new"!==e("#llms_stripe_saved_card_id").val()&&r.focus())})},t.mount_card=function(){r.mount("#llms-stripe-card-element"),r.addEventListener("change",function(e){e.error?t.set_error(e.error.message):t.set_error(""),e.complete?t.toggle_submit(!0):t.toggle_submit(!1)})},t.toggle_submit=function(t){var l=e("#llms_create_pending_order, #llms_save_payment_method");t?l.removeAttr("disabled"):l.attr("disabled","disabled")},t.get_token=function(e){l.createToken(r).then(function(t){t.error?e(null,t.error):e(t.token)})},t.is_selected=function(){return e("#llms_payment_gateway_stripe").is(":checked")},t.set_error=function(e){document.getElementById("llms-stripe-card-errors").textContent=e},t.submit=function(l,r){var s=e("#llms_stripe_saved_card_id"),n=(e(this),!0);l.is_selected()?s.length&&"create-new"!==s.val()?r(n):t.get_token(function(t,l){t?t&&(e("#llms_stripe_token").val(t.id),e("#llms_stripe_card_id").val(t.card.id)):n=l.message,r(n)}):r(n)},window.llms.checkout.add_gateway(t),t.bind()}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtc3RyaXBlLmpzIl0sIm5hbWVzIjpbIiQiLCJsbG1zX3N0cmlwZSIsIndpbmRvdyIsInN0cmlwZSIsIlN0cmlwZSIsInB1Ymxpc2hhYmxlX2tleSIsImNhcmQiLCJlbGVtZW50cyIsInNldHRpbmdzIiwiY3JlYXRlIiwiYmluZCIsInNlbGYiLCJ0aGlzIiwibGxtcyIsImNoZWNrb3V0IiwiYWRkX2JlZm9yZV9zdWJtaXRfZXZlbnQiLCJkYXRhIiwiaGFuZGxlciIsInN1Ym1pdCIsImxlbmd0aCIsIm1vdW50X2NhcmQiLCJvbiIsImNhcmRfaWQiLCJ2YWwiLCIkY2FyZF9pZCIsIm1vdW50IiwidG9nZ2xlX3N1Ym1pdCIsInVubW91bnQiLCJ1cGRhdGUiLCJ2YWx1ZSIsInBvc3RhbENvZGUiLCJ0cmlnZ2VyIiwiZSIsImlkIiwiX2NvbXBsZXRlIiwiZm9jdXMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJlcnJvciIsInNldF9lcnJvciIsIm1lc3NhZ2UiLCJjb21wbGV0ZSIsInRvZ2dsZSIsIiRidG5zIiwicmVtb3ZlQXR0ciIsImF0dHIiLCJnZXRfdG9rZW4iLCJjYWxsYmFjayIsImNyZWF0ZVRva2VuIiwidGhlbiIsInJlc3VsdCIsInRva2VuIiwiaXNfc2VsZWN0ZWQiLCJpcyIsIm1zZyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0ZXh0Q29udGVudCIsIiRzYXZlZCIsInJlc3BvbnNlIiwiZXJyIiwiYWRkX2dhdGV3YXkiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQUtBLFNBQVlBLEdBRVgsSUFBSUMsRUFBY0MsT0FBT0QsZ0JBQ3hCRSxFQUFTQyxPQUFRSCxFQUFZSSxpQkFFN0JDLEVBRFdILEVBQU9JLFNBQVVOLEVBQVlPLFNBQVNELFVBQ2pDRSxPQUFRLE9BQVFSLEVBQVlPLFNBQVNGLE1BUXRETCxFQUFZUyxLQUFPLFdBRWxCLElBQUlDLEVBQU9DLEtBR1hWLE9BQU9XLEtBQUtDLFNBQVNDLHlCQUNwQkMsS0FBTUwsRUFDTk0sUUFBU04sRUFBS08sU0FHVmxCLEVBQUcsNkJBQThCbUIsUUFFckNSLEVBQUtTLGFBS05wQixFQUFHLDhCQUErQnFCLEdBQUksU0FBVSxXQUUvQyxJQUFJQyxFQUFVdEIsRUFBR1ksTUFBT1csTUFDdkJDLEVBQVd4QixFQUFHLHdCQUdWLGVBQWlCc0IsR0FFckJFLEVBQVNELElBQUssSUFDZGpCLEVBQUttQixNQUFPLDZCQUNaZCxFQUFLZSxlQUFlLEtBS3BCRixFQUFTRCxJQUFLRCxHQUNkaEIsRUFBS3FCLFVBQ0xoQixFQUFLZSxlQUFlLE1BTXRCMUIsRUFBRyxxQkFBc0JxQixHQUFJLE9BQVEsV0FFcENmLEVBQUtzQixRQUNKQyxPQUNDQyxXQUFZOUIsRUFBRyxxQkFBc0J1QixXQUlwQ1EsUUFBUyxRQUdiL0IsRUFBRyw4QkFBK0IrQixRQUFTLFVBRzNDL0IsRUFBRywwQkFBMkJxQixHQUFJLHdCQUF5QixTQUFVVyxFQUFHaEIsR0FDbEUsV0FBYUEsRUFBS2lCLEtBRWpCM0IsRUFBSzRCLFVBQ1R2QixFQUFLZSxlQUFlLEdBRXBCZixFQUFLZSxlQUFlLEdBR3JCMUIsRUFBRyw4QkFBK0IrQixRQUFTLFVBRXRDLGVBQWlCL0IsRUFBRyw4QkFBK0J1QixPQUN2RGpCLEVBQUs2QixZQWtCVGxDLEVBQVltQixXQUFhLFdBR3hCZCxFQUFLbUIsTUFBTyw2QkFHWm5CLEVBQUs4QixpQkFBa0IsU0FBVSxTQUFVQyxHQUdyQ0EsRUFBTUMsTUFFVnJDLEVBQVlzQyxVQUFXRixFQUFNQyxNQUFNRSxTQUtuQ3ZDLEVBQVlzQyxVQUFXLElBS25CRixFQUFNSSxTQUNWeEMsRUFBWXlCLGVBQWUsR0FFM0J6QixFQUFZeUIsZUFBZSxNQWU5QnpCLEVBQVl5QixjQUFnQixTQUFVZ0IsR0FFckMsSUFBSUMsRUFBUTNDLEVBQUcseURBRVYwQyxFQUNKQyxFQUFNQyxXQUFZLFlBRWxCRCxFQUFNRSxLQUFNLFdBQVksYUFjMUI1QyxFQUFZNkMsVUFBWSxTQUFVQyxHQUlqQzVDLEVBQU82QyxZQUFhMUMsR0FBTzJDLEtBQU0sU0FBVUMsR0FHckNBLEVBQU9aLE1BRVhTLEVBQVUsS0FBTUcsRUFBT1osT0FLdkJTLEVBQVVHLEVBQU9DLFVBY3BCbEQsRUFBWW1ELFlBQWMsV0FHekIsT0FBT3BELEVBQUcsZ0NBQWlDcUQsR0FBSSxhQVVoRHBELEVBQVlzQyxVQUFZLFNBQVVlLEdBRXhCQyxTQUFTQyxlQUFnQiwyQkFDL0JDLFlBQWNILEdBVWxCckQsRUFBWWlCLE9BQVMsU0FBVVAsRUFBTW9DLEdBRXBDLElBQUlXLEVBQVMxRCxFQUFHLDhCQUVmMkQsR0FEUTNELEVBQUdZLE9BQ0EsR0FHTkQsRUFBS3lDLGNBTU5NLEVBQU92QyxRQUFVLGVBQWlCdUMsRUFBT25DLE1BQzdDd0IsRUFBVVksR0FLWDFELEVBQVk2QyxVQUFXLFNBQVVLLEVBQU9TLEdBR2hDVCxFQUtLQSxJQUVYbkQsRUFBRyxzQkFBdUJ1QixJQUFLNEIsRUFBTWxCLElBQ3JDakMsRUFBRyx3QkFBeUJ1QixJQUFLNEIsRUFBTTdDLEtBQUsyQixLQU41QzBCLEVBQVdDLEVBQUlwQixRQVVoQk8sRUFBVVksS0ExQlZaLEVBQVVZLElBaUNaekQsT0FBT1csS0FBS0MsU0FBUytDLFlBQWE1RCxHQUVsQ0EsRUFBWVMsT0E5UGIsQ0FnUUtvRCIsImZpbGUiOiJsbG1zLXN0cmlwZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpZnRlckxNUyBTdHJpcGUgSlMgcGF5bWVudCBnYXRld2F5XG4gKiBAc2luY2UgICAgNC4wLjBcbiAqIEB2ZXJzaW9uICA0LjMuMlxuICovXG4oIGZ1bmN0aW9uKCAkICkge1xuXG5cdHZhciBsbG1zX3N0cmlwZSA9IHdpbmRvdy5sbG1zX3N0cmlwZSB8fCB7fSxcblx0XHRzdHJpcGUgPSBTdHJpcGUoIGxsbXNfc3RyaXBlLnB1Ymxpc2hhYmxlX2tleSApLFxuXHRcdGVsZW1lbnRzID0gc3RyaXBlLmVsZW1lbnRzKCBsbG1zX3N0cmlwZS5zZXR0aW5ncy5lbGVtZW50cyApLFxuXHRcdGNhcmQgPSBlbGVtZW50cy5jcmVhdGUoICdjYXJkJywgbGxtc19zdHJpcGUuc2V0dGluZ3MuY2FyZCApO1xuXG5cdC8qKlxuXHQgKiBCaW5kIERPTSBldmVudHNcblx0ICogQHJldHVybiAgIHZvaWRcblx0ICogQHNpbmNlICAgIDQuMC4wXG5cdCAqIEB2ZXJzaW9uICA0LjMuMlxuXHQgKi9cblx0bGxtc19zdHJpcGUuYmluZCA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzXG5cblx0XHQvLyBhZGQgdG9rZW4gY3JlYXRpb24gJiBjYyB2YWxpZGF0aW9uIHRvIGNvcmUgYmVmb3JlIHN1Ym1pdCB2YWxpZGF0aW9uc1xuXHRcdHdpbmRvdy5sbG1zLmNoZWNrb3V0LmFkZF9iZWZvcmVfc3VibWl0X2V2ZW50KCB7XG5cdFx0XHRkYXRhOiBzZWxmLFxuXHRcdFx0aGFuZGxlcjogc2VsZi5zdWJtaXQsXG5cdFx0fSApO1xuXG5cdFx0aWYgKCAkKCAnI2xsbXMtc3RyaXBlLWNhcmQtZWxlbWVudCcgKS5sZW5ndGggKSB7XG5cblx0XHRcdHNlbGYubW91bnRfY2FyZCgpO1xuXG5cdFx0fVxuXG5cdFx0Ly8gc2F2ZWQgY2FyZCBkcm9wZG93biBpbnRlcmFjdGlvbnNcblx0XHQkKCAnI2xsbXNfc3RyaXBlX3NhdmVkX2NhcmRfaWQnICkub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGNhcmRfaWQgPSAkKCB0aGlzICkudmFsKCksXG5cdFx0XHRcdCRjYXJkX2lkID0gJCggJyNsbG1zX3N0cmlwZV9jYXJkX2lkJyApO1xuXG5cdFx0XHQvLyByZW1vdmUgdGhlIGV4aXN0aW5nIGNhcmQgSUQgKGlmIHRoZXJlIGlzIG9uZSkgJiBtb3VudCB0aGUgU3RyaXBlIEVsZW1lbnRcblx0XHRcdGlmICggJ2NyZWF0ZS1uZXcnID09PSBjYXJkX2lkICkge1xuXG5cdFx0XHRcdCRjYXJkX2lkLnZhbCggJycgKTtcblx0XHRcdFx0Y2FyZC5tb3VudCggJyNsbG1zLXN0cmlwZS1jYXJkLWVsZW1lbnQnICk7XG5cdFx0XHRcdHNlbGYudG9nZ2xlX3N1Ym1pdCggZmFsc2UgKTtcblxuXHRcdFx0Ly8gdW5tb3VudCB0aGUgZWxlbWVudCBhbmQgc2V0IHRoZSBjYXJkIElEIHRvIGJlIHRoZSBzZWxlY3RlZCBjYXJkIElEXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdCRjYXJkX2lkLnZhbCggY2FyZF9pZCApO1xuXHRcdFx0XHRjYXJkLnVubW91bnQoKTtcblx0XHRcdFx0c2VsZi50b2dnbGVfc3VibWl0KCB0cnVlICk7XG5cblx0XHRcdH1cblxuXHRcdH0gKTtcblxuXHRcdCQoICcjbGxtc19iaWxsaW5nX3ppcCcgKS5vbiggJ2JsdXInLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Y2FyZC51cGRhdGUoIHtcblx0XHRcdFx0dmFsdWU6IHtcblx0XHRcdFx0XHRwb3N0YWxDb2RlOiAkKCAnI2xsbXNfYmlsbGluZ196aXAnICkudmFsKCksXG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXHRcdH0gKS50cmlnZ2VyKCAnYmx1cicgKTtcblxuXHRcdC8vIHRyaWdnZXIgc2F2ZWQgY2FyZCBmaWVsZCBjaGFuZ2Ugb24gcGFnZWxvYWRcblx0XHQkKCAnI2xsbXNfc3RyaXBlX3NhdmVkX2NhcmRfaWQnICkudHJpZ2dlciggJ2NoYW5nZScgKTtcblxuXHRcdC8vIHdoZW4gc3RyaXBlIGlzIHNlbGVjdGVkIHdlIHNob3VsZCB0cmlnZ2VyIGEgc2F2ZWQgY2FyZCBjaGFuZ2Vcblx0XHQkKCAnLmxsbXMtcGF5bWVudC1nYXRld2F5cycgKS5vbiggJ2xsbXMtZ2F0ZXdheS1zZWxlY3RlZCcsIGZ1bmN0aW9uKCBlLCBkYXRhICkge1xuXHRcdFx0aWYgKCAnc3RyaXBlJyA9PT0gZGF0YS5pZCApIHtcblxuXHRcdFx0XHRpZiAoIGNhcmQuX2NvbXBsZXRlICkge1xuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX3N1Ym1pdCggdHJ1ZSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX3N1Ym1pdCggZmFsc2UgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCQoICcjbGxtc19zdHJpcGVfc2F2ZWRfY2FyZF9pZCcgKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXG5cdFx0XHRcdGlmICggJ2NyZWF0ZS1uZXcnICE9PSAkKCAnI2xsbXNfc3RyaXBlX3NhdmVkX2NhcmRfaWQnICkudmFsKCkgKSB7XG5cdFx0XHRcdFx0Y2FyZC5mb2N1cygpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH1cblx0XHR9ICk7XG5cblx0XHQvLyBpZiAoIHNlbGYuaXNfc2VsZWN0ZWQgKSB7XG5cdFx0Ly8gXHRzZWxmLnRvZ2dsZV9zdWJtaXQoIGZhbHNlICk7XG5cdFx0Ly8gfVxuXG5cdH07XG5cblx0LyoqXG5cdCAqIE1vdW50IHRoZSBjYXJkXG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICA0LjMuMlxuXHQgKiBAdmVyc2lvbiAgNC4zLjJcblx0ICovXG5cdGxsbXNfc3RyaXBlLm1vdW50X2NhcmQgPSBmdW5jdGlvbigpIHtcblxuXHRcdC8vIEFkZCBhbiBpbnN0YW5jZSBvZiB0aGUgY2FyZCBVSSBjb21wb25lbnQgaW50byB0aGUgYGNhcmQtZWxlbWVudGAgPGRpdj5cblx0XHRjYXJkLm1vdW50KCAnI2xsbXMtc3RyaXBlLWNhcmQtZWxlbWVudCcgKTtcblxuXHRcdC8vIGRvIHN0dWZmIHdoZW4gdGhlIGNhcmQgaXMgdXBkYXRlZFxuXHRcdGNhcmQuYWRkRXZlbnRMaXN0ZW5lciggJ2NoYW5nZScsIGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0Ly8gc2hvdyBlcnJvciBtZXNzYWdlcyB3aGVuIGFuIGVycm9yIGV4aXN0c1xuXHRcdFx0aWYgKCBldmVudC5lcnJvciApIHtcblxuXHRcdFx0XHRsbG1zX3N0cmlwZS5zZXRfZXJyb3IoIGV2ZW50LmVycm9yLm1lc3NhZ2UgKTtcblxuXHRcdFx0Ly8gY2xlYXIgZXJyb3IgbWVzc2FnZXNcblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0bGxtc19zdHJpcGUuc2V0X2Vycm9yKCAnJyApO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGVuYWJsZSB0aGUgY2hlY2tvdXQgYnV0dG9uXG5cdFx0XHRpZiAoIGV2ZW50LmNvbXBsZXRlICkge1xuXHRcdFx0XHRsbG1zX3N0cmlwZS50b2dnbGVfc3VibWl0KCB0cnVlICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsbG1zX3N0cmlwZS50b2dnbGVfc3VibWl0KCBmYWxzZSApO1xuXHRcdFx0fVxuXG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogRW5hYmxlL0Rpc2FibGUgdGhlIGNoZWNrb3V0L3VwZGF0ZSBzdWJtaXQgYnV0dG9uXG5cdCAqIEBwYXJhbSAgICBib29sICAgICAgIHRvZ2dsZSAgaWYgdHJ1dGhpZSBlbmFibGVzXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZmFsc2llLCBkaXNhYmxlc1xuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgNC4zLjBcblx0ICogQHZlcnNpb24gIDQuMy4wXG5cdCAqL1xuXHRsbG1zX3N0cmlwZS50b2dnbGVfc3VibWl0ID0gZnVuY3Rpb24oIHRvZ2dsZSApIHtcblxuXHRcdHZhciAkYnRucyA9ICQoICcjbGxtc19jcmVhdGVfcGVuZGluZ19vcmRlciwgI2xsbXNfc2F2ZV9wYXltZW50X21ldGhvZCcgKTtcblxuXHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0JGJ0bnMucmVtb3ZlQXR0ciggJ2Rpc2FibGVkJyApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkYnRucy5hdHRyKCAnZGlzYWJsZWQnLCAnZGlzYWJsZWQnICk7XG5cdFx0fVxuXG5cdH07XG5cblx0LyoqXG5cdCAqIFJldHJpZXZlIGEgdG9rZW4gdXNpbmcgU3RyaXBlLmpzIChBU1lOQylcblx0ICogQHBhcmFtICAgIGZ1bmN0aW9uICBjYWxsYmFjayAgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggMiBwYXJhbXNcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyBvYmplY3Rcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3Igb2JqZWN0XG5cdCAqIEByZXR1cm4gICBjYWxsYmFja1xuXHQgKiBAc2luY2UgICAgMy4wLjBcblx0ICogQHZlcnNpb24gIDMuMC4wXG5cdCAqL1xuXHRsbG1zX3N0cmlwZS5nZXRfdG9rZW4gPSBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRzdHJpcGUuY3JlYXRlVG9rZW4oIGNhcmQgKS50aGVuKCBmdW5jdGlvbiggcmVzdWx0ICkge1xuXG5cdFx0XHQvLyBzaG93IGVycm9yXG5cdFx0XHRpZiAoIHJlc3VsdC5lcnJvciApIHtcblxuXHRcdFx0XHRjYWxsYmFjayggbnVsbCwgcmVzdWx0LmVycm9yICk7XG5cblx0XHRcdC8vIGFkZCB0aGUgdG9rZW4gdG8gdGhlIGRvbVxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRjYWxsYmFjayggcmVzdWx0LnRva2VuICk7XG5cblx0XHRcdH1cblxuXHRcdH0gKTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgU3RyaXBlIGlzIHNlbGVjdGVkIG9uIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBwYXltZW50IG1ldGhvZHNcblx0ICogQHJldHVybiBCb29sZWFuXG5cdCAqIEBzaW5jZSAgMi4wLjBcblx0ICogQHZlcnNpb24gNC4wLjBcblx0ICovXG5cdGxsbXNfc3RyaXBlLmlzX3NlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG5cblx0XHQvLyBjaGVjayB0aGUgcGF5bWVudCBtZXRob2QgcmFkaW8gZWxlbWVudCB0byBzZWUgaWYgaXQncyBjaGVja2VkXG5cdFx0cmV0dXJuICQoICcjbGxtc19wYXltZW50X2dhdGV3YXlfc3RyaXBlJyApLmlzKCAnOmNoZWNrZWQnICk7XG5cblx0fTtcblxuXHQvKipcblx0ICogQWRkIGEgU3RyaXBlIEVsZWVudHMgZXJyb3IgbWVzc2FnZVxuXHQgKiBAcGFyYW0gICAgc3RyaW5nICAgbXNnICBlcnJvciBtZXNzYWdlXG5cdCAqIEBzaW5jZSAgICA0LjMuMFxuXHQgKiBAdmVyc2lvbiAgNC4zLjBcblx0ICovXG5cdGxsbXNfc3RyaXBlLnNldF9lcnJvciA9IGZ1bmN0aW9uKCBtc2cgKSB7XG5cblx0XHR2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2xsbXMtc3RyaXBlLWNhcmQtZXJyb3JzJyApO1xuXHRcdGVsLnRleHRDb250ZW50ID0gbXNnO1xuXG5cdH07XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBjaGVja291dCBzdWJtaXNzaW9uIHRvIHJldHJpZXZlIGEgdG9rZW4gd2hlbiBTdHJpcGUgaXMgdGhlIHNlbGVjdGVkIGdhdGV3YXlcblx0ICogQHJldHVybiAgdm9pZFxuXHQgKiBAc2luY2UgICA0LjAuMFxuXHQgKiBAdmVyc2lvbiA0LjMuMFxuXHQgKi9cblx0bGxtc19zdHJpcGUuc3VibWl0ID0gZnVuY3Rpb24oIHNlbGYsIGNhbGxiYWNrICkge1xuXG5cdFx0dmFyICRzYXZlZCA9ICQoICcjbGxtc19zdHJpcGVfc2F2ZWRfY2FyZF9pZCcgKSxcblx0XHRcdCRmb3JtID0gJCggdGhpcyApLFxuXHRcdFx0cmVzcG9uc2UgPSB0cnVlO1xuXG5cdFx0Ly8gZG9uJ3QgcHJvY2VlZCB1bmxlc3Mgc3RyaXBlIGlzIHNlbGVjdGVkXG5cdFx0aWYoICEgc2VsZi5pc19zZWxlY3RlZCgpICkge1xuXHRcdFx0Y2FsbGJhY2soIHJlc3BvbnNlICk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gc2tpcCBpZiB3ZSdyZSB1c2luZyBhIHNhdmVkIENhcmQgSURcblx0XHRpZiAoICRzYXZlZC5sZW5ndGggJiYgJ2NyZWF0ZS1uZXcnICE9PSAkc2F2ZWQudmFsKCkgKSB7XG5cdFx0XHRjYWxsYmFjayggcmVzcG9uc2UgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBnZXQgYSB0b2tlblxuXHRcdGxsbXNfc3RyaXBlLmdldF90b2tlbiggZnVuY3Rpb24oIHRva2VuLCBlcnIgKSB7XG5cblx0XHRcdC8vIGVycm9yXG5cdFx0XHRpZiAoICEgdG9rZW4gKSB7XG5cblx0XHRcdFx0cmVzcG9uc2UgPSBlcnIubWVzc2FnZTtcblxuXHRcdFx0Ly8gc3VjY2Vzc1xuXHRcdFx0fSBlbHNlIGlmICggdG9rZW4gKSB7XG5cblx0XHRcdFx0JCggJyNsbG1zX3N0cmlwZV90b2tlbicgKS52YWwoIHRva2VuLmlkICk7XG5cdFx0XHRcdCQoICcjbGxtc19zdHJpcGVfY2FyZF9pZCcgKS52YWwoIHRva2VuLmNhcmQuaWQgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRjYWxsYmFjayggcmVzcG9uc2UgKTtcblxuXHRcdH0gKTtcblxuXHR9O1xuXG5cdC8vIGFkZCB0aGlzIG9iamVjdCB0byB0aGUgY29yZSBjaGVja291dCBjbGFzcyBmb3IgZnV0dXJlIGJpbmRzXG5cdHdpbmRvdy5sbG1zLmNoZWNrb3V0LmFkZF9nYXRld2F5KCBsbG1zX3N0cmlwZSApO1xuXG5cdGxsbXNfc3RyaXBlLmJpbmQoKTtcblxufSApKCBqUXVlcnkgKTtcblxuIl19
