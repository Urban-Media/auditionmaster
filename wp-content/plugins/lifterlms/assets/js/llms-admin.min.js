!function(t){window.llms=window.llms||{},window.llms.widgets=function(){return this.$widgets=t(".llms-widget"),this.$info_toggles=t(".llms-widget-info-toggle"),this.init=function(){this.bind()},this.bind=function(){var e=this;this.$info_toggles.on("hover",function(){var n=t(this),l=n.closest(".llms-widget"),i=(l.find(".llms-widget-info"),l.hasClass("info-showing")?"hide":"show");e.$widgets.removeClass("info-showing"),"show"===i&&l.addClass("info-showing")})},this.init(),this};new window.llms.widgets;t.fn.llmsStudentsSelect2=function(e){var n=this,e=e||{},l={allow_clear:!1,enrolled_in:"",multiple:!1,not_enrolled_in:"",placeholder:"Select a student",roles:"",width:"100%"};return t.each(l,function(t){n.attr("data-"+t)&&(e[t]=n.attr("data-"+t))}),e=t.extend(l,e),this.llmsSelect2({allowClear:e.allow_clear,ajax:{dataType:"JSON",delay:250,method:"POST",url:window.ajaxurl,data:function(t){return{_ajax_nonce:wp_ajax_data.nonce,action:"query_students",page:t.page,not_enrolled_in:t.not_enrolled_in||e.not_enrolled_in,enrolled_in:t.enrolled_in||e.enrolled_in,roles:t.roles||e.roles,term:t.term}},processResults:function(e,n){return{results:t.map(e.items,function(t){return{text:t.name+" <"+t.email+">",id:t.id}}),pagination:{more:e.more}}}},cache:!0,placeholder:e.placeholder,multiple:e.multiple,width:e.width}),this},t('a[href="#llms-delete-quiz-attempt"]').on("click",function(e){if(e.stopPropagation(),e.preventDefault(),window.confirm(LLMS.l10n.translate("delete_quiz_attempt"))){var n=t(this),l=n.closest(".llms-quiz-attempt");LLMS.Ajax.call({data:{action:"delete_quiz_attempt",attempt:n.attr("data-attempt"),lesson:n.attr("data-lesson"),quiz:n.attr("data-quiz"),user:n.attr("data-user")},beforeSend:function(){LLMS.Spinner.start(l,"small")},success:function(t){t.code?alert(t.message):t.success?window.location.reload():alert(LLMS.l10n.translate("An unknown error occurred, please try again."))}})}})}(jQuery);